(jbuild_version 1)

(library
 (
  (name pulsar)
  (wrapped false)
  (libraries (warp unix str sedlex menhirLib))
  (preprocess (per_module ((pps (sedlex.ppx)) (lexer))))
  ))

(rule
  ((targets (parser.ml parser.mli))
   (deps    (parser.mly))
   (action
    (chdir ${ROOT}
           (run ${bin:menhir}
                --explain
                --table
                --external-tokens Lexer
                ${<})))))
